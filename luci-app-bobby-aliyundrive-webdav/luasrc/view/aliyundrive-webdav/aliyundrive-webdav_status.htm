<script type="text/javascript">//<![CDATA[
	XHR.poll(3, '<%=url([[admin]], [[services]], [[aliyundrive-webdav]], [[status]])%>', null,
		function (x, data) {
			var tb = document.getElementById('aliyundrive-webdav_status');
			if (data && tb) {
				if (data.running) {
					tb.innerHTML = '<b style=color:green>' + data.application + '<%:RUNNING%></b>';
				} else {
					tb.innerHTML = '<b style=color:red>' + data.application + '<%:NOT RUNNING%></b>';
				}
			}
		}
	);

	function invalidateCache(button) {
		XHR.get('<%=url([[admin]], [[services]], [[aliyundrive-webdav]], [[invalidate-cache]])%>', null,
			function (x, data) {
				if (data.ok) {
					alert("缓存已清除");
				} else {
					alert("清除缓存失败");
				}
			}
		);
	}
	//]]>
</script>
<style>
	.mar-10 {
		margin-left: 50px;
		margin-right: 10px;
	}
</style>
<fieldset class="cbi-section">
	<div style="width: 100%">
		<div id="aliyundrive-webdav_status" style="float: left; width: 80%;">
			<%:Collecting data...%>
		</div>
		<div style="float: right; width: 20%;">
			<button class="cbi-button" style="float: right" onclick="event.stopPropagation(); invalidateCache(this);">
				<%:Invalidate cache%>
			</button>
		</div>
	</div>
</fieldset>